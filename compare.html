<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Norges Sopper - Compare</title>
  <link rel="stylesheet" href="compare.css">
</head>
<body>
  <header>
    <h1>Norges Sopper</h1>
    <nav>
      <a href="index.html">Hjem</a>
      <a href="compare.html">Side ved Side</a>
      <a href="mushrooms.html">Sopp</a>
    </nav>
  </header>

  <div class="compare-container">
    <div class="mushroom-column">
      <button id="moveUp1">Move Up</button>
      <button id="moveDown1">Move Down</button>
      <input type="text" id="search1" placeholder="Søk etter sopp 1">
      <div id="mushroom1-images"></div>
    </div>
    <div class="mushroom-column">
      <button id="moveUp2">Move Up</button>
      <button id="moveDown2">Move Down</button>
      <input type="text" id="search2" placeholder="Søk etter sopp 2">
      <div id="mushroom2-images"></div>
    </div>
  </div>

  <script>
    const mushrooms = [];

    async function fetchData() {
      const response = await fetch('data.json');
      const data = await response.json();
      mushrooms.push(...data);
    }

    fetchData();

    function populateComparePage() {
      const searchInput1 = document.getElementById('search1');
      const searchInput2 = document.getElementById('search2');
      const mushroom1Images = document.getElementById('mushroom1-images');
      const mushroom2Images = document.getElementById('mushroom2-images');
      const moveUpButton1 = document.getElementById('moveUp1');
      const moveDownButton1 = document.getElementById('moveDown1');
      const moveUpButton2 = document.getElementById('moveUp2');
      const moveDownButton2 = document.getElementById('moveDown2');

      searchInput1.addEventListener('input', (event) => {
        const searchTerm = event.target.value.toLowerCase();
        const filteredMushrooms = mushrooms.filter(mushroom => mushroom.norwegianName.toLowerCase().includes(searchTerm));

        if (filteredMushrooms.length > 0) {
          const mushroom = filteredMushrooms[0]; // Assuming only one result for simplicity
          mushroom1Images.innerHTML = '';
          mushroom.images.forEach((imageFilename, index) => {
            const image = document.createElement('img');
            image.src = `images/${imageFilename}`;
            image.alt = mushroom.norwegianName;
            image.classList.add('mushroom-image');
            mushroom1Images.appendChild(image);
            if (index === 4) {
              return; // Break after 5 images
            }
          });
          imageArray1 = mushroom.images.slice(0, 5); // Create a copy of the image array
        } else {
          mushroom1Images.innerHTML = 'No results found';
        }
      });

      searchInput2.addEventListener('input', (event) => {
        const searchTerm = event.target.value.toLowerCase();
        const filteredMushrooms = mushrooms.filter(mushroom => mushroom.norwegianName.toLowerCase().includes(searchTerm));

        if (filteredMushrooms.length > 0) {
          const mushroom = filteredMushrooms[0]; // Assuming only one result for simplicity
          mushroom2Images.innerHTML = '';
          mushroom.images.forEach((imageFilename, index) => {
            const image = document.createElement('img');
            image.src = `images/${imageFilename}`;
            image.alt = mushroom.norwegianName;
            image.classList.add('mushroom-image');
            mushroom2Images.appendChild(image);
            if (index === 4) {
              return; // Break after 5 images
            }
          });
          imageArray2 = mushroom.images.slice(0, 5); // Create a copy of the image array
        } else {
          mushroom2Images.innerHTML = 'No results found';
        }
      });

      let imageArray1 = [];
      let imageArray2 = [];

      moveUpButton1.addEventListener('click', () => {
        if (imageArray1.length > 1) {
          const firstImage = imageArray1.shift();
          imageArray1.push(firstImage);
          updateImages(mushroom1Images, imageArray1);
        }
      });

      moveDownButton1.addEventListener('click', () => {
        if (imageArray1.length > 1) {
          const lastImage = imageArray1.pop();
          imageArray1.unshift(lastImage);
          updateImages(mushroom1Images, imageArray1);
        }
      });

      moveUpButton2.addEventListener('click', () => {
        if (imageArray2.length > 1) {
          const firstImage = imageArray2.shift();
          imageArray2.push(firstImage);
          updateImages(mushroom2Images, imageArray2);
        }
      });

      moveDownButton2.addEventListener('click', () => {
        if (imageArray2.length > 1) {
          const lastImage = imageArray2.pop();
          imageArray2.unshift(lastImage);
          updateImages(mushroom2Images, imageArray2);
        }
      });

      function updateImages(container, images) {
        container.innerHTML = '';
        images.forEach(imageSrc => {
          const image = document.createElement('img');
          image.src = `images/${imageSrc}`;
          image.alt = `Image`;
          image.classList.add('mushroom-image');
          container.appendChild(image);
        });
      }
    }

    populateComparePage();
  </script>
</body>
</html>
